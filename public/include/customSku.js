var customPropId=-1;var customPropValId=-1;$(function(){$(document).on("click",".cloneSku",function(){var cloneSource=$("#skuCloneModel");var cloneNode=cloneSource.clone(true);cloneNode.css("display","block");cloneNode.removeAttr("id");customPropId--;$(cloneNode).find(".cusSkuTypeInput").parent().attr("propid",customPropId);$(cloneNode).find(".cusSkuValInput").prev().attr("propid",customPropId);customPropValId--;$(cloneNode).find(".cusSkuValInput").prev().attr("propvalid",customPropValId);$(this).before(cloneNode);});$(document).on("click",".cloneSkuVal",function(){var cloneSource=$("#onlySkuValCloneModel");var cloneNode=cloneSource.clone(true);cloneNode.removeAttr("id");var propid=$(this).parents("ul").prev().find("li").attr("propid");$(cloneNode).find(".cusSkuValInput").prev().attr("propid",propid);customPropValId--;$(cloneNode).find(".cusSkuValInput").prev().attr("propvalid",customPropValId);cloneNode.css("display","block");$(this).before(cloneNode);});$(document).on("change",".cusSkuTypeInput",function(){var isHaveThisSkuType=false;var customSkuTypeName=$(this).val();if(customSkuTypeName){$("ul[class*='SKU_TYPE']").find("li").each(function(){var currSkuTypeName=$(this).attr("sku-type-name");if(currSkuTypeName==customSkuTypeName){isHaveThisSkuType=true;}});}
if(isHaveThisSkuType){layer.alert("该SKU类型已经存在!");$(this).val("");}
$(this).parent().attr("sku-type-name",$(this).val());if(!$(this).val()||isHaveThisSkuType){$(this).parent().parent().next().find("input[type='checkbox'][class*='sku_value']").each(function(){$(this).attr("checked",false)
$(this).removeClass("sku_value");});}
$(".model_sku_val").trigger("change");});$(document).on("change",".cusSkuValInput",function(){var isHaveSkuVal=false;var thisSkuVal=$(this).val();$(".model_sku_val,.sku_value").each(function(){var customSkuVal=$(this).val();if(thisSkuVal==customSkuVal){isHaveSkuVal=true;return;}});if(isHaveSkuVal){layer.alert("该SKU类型已经存在!");$(this).val("");}
$("input[type*='checkbox'][class*='']")
var cusSkuVal=$(this).val();if(!cusSkuVal||isHaveSkuVal){$(this).prev().removeClass("sku_value");if($(this).prev().is(":checked")){$(this).prev().attr("checked",false);}}
$(this).prev().val(cusSkuVal);$(".model_sku_val").trigger("change");});$(document).on("change",".model_sku_val",function(){var skuTypeVal=$(this).parent().parent().prev().find("li").attr("sku-type-name");if(skuTypeVal&&$(this).val()){$(this).addClass("sku_value");}
$("input[type='checkbox']").first().trigger("change");});$(document).on("click",".delCusSkuType",function(){$(this).parent().parent().parent().remove();$("input[type='checkbox']").first().trigger("change");});$(document).on("click",".delCusSkuVal",function(){$(this).parent().remove();$("input[type='checkbox']").first().trigger("change");});})